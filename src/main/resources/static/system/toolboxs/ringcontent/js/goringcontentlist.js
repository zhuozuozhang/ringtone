$(document).ready(function(){showTable()});function showTable(){var params={"ringcontent":$('#ringcontent').val()};var columns=[{"data":"ringContent"}];var columnDefs=[{targets:[1],render:function(data,type,row,meta){return"<a class=\"fr\" title='点击复制' style='cursor: pointer;' onclick='copyContext(\""+row.ringContent+"\");'><span class=\"copys\">复制</span></a>"}}];page("#set",10,params,"/toolboxs/selectRingContent",columns,columnDefs)}function copyContext(content){layer.confirm("确认要复制吗？",{btn:["确定","取消"]},function(){var input=document.getElementById("copyarea");input.value=content;input.select();document.execCommand("copy");layer.msg("已复制",{icon:6,time:3000})},function(){})}function page(obj,pagesize,dataJsonStr,url,columns,columnDefs){var labelItemListDataTable=$(obj).dataTable();labelItemListDataTable.fnClearTable(false);labelItemListDataTable.fnDestroy();table=$(obj).DataTable({language:{"processing":"正在加载数据...","lengthMenu":"_MENU_ 记录/页","zeroRecords":"没有匹配的记录","info":"第 _START_ 至 _END_ 项记录，共 _TOTAL_ 项","infoEmpty":"第 0 至 0 项记录，共 0 项","infoFiltered":"(由 _MAX_ 项记录过滤)","infoPostFix":"","search":"搜索:","url":"","decimal":",","thousands":".","emptyTable":"未找到符合条件的数据","paginate":{"first":"首页","previous":"上页","next":"下页","last":"末页"}},retrieve:true,paging:true,ordering:false,info:true,autoWidth:false,bDestory:true,pageLength:pagesize,pagingType:"full_numbers",bFilter:false,bLengthChange:false,serverSide:true,ajax:function(data,callback,settings){var start=data.start;dataJsonStr.page=(data.start)/data.length+1;dataJsonStr.pagesize=data.length;var layuiLoding;$.ajax({type:"POST",url:url,cache:false,data:dataJsonStr,timeout:20000,beforeSend:function(){layuiLoding=layer.load(0,{time:false,shade:[0.5,'#9c9c9c'],content:'正在读取数据...',success:function(layero){layero.find('.layui-layer-content').css({'padding':'39px 10px','width':'100px'})}})},success:function(data){if(data.code==200){var arr="";if('object'==typeof data){arr=data}else{arr=$.parseJSON(data)}var returnData={};if(arr!=null){returnData.recordsTotal=arr.totalCount;returnData.recordsFiltered=arr.totalCount;returnData.data=arr.data}callback(returnData)}else{layer.msg(data.msg,{icon:5,time:1000})}},complete:function(){layer.close(layuiLoding)},error:function(XMLHttpRequest,textStatus,errorThrown){layer.msg("查询失败!",{icon:5,time:1000})}})},columns:columns,columnDefs:columnDefs,})}