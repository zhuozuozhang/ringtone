<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>企业彩铃-号码认证</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,testUser-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <link rel="shortcut icon" th:href="@{/favicon.ico}" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" th:href="@{/public/layui/css/modules/layer/default/layer.css}">
    <link rel="stylesheet" th:href="@{/admin/css/font.css}">
    <link rel="stylesheet" th:href="@{/admin/css/xadmin.css}">
    <link rel="stylesheet" type="text/css" href="../../public/dataTables/jquery.dataTables.min.css"
          th:href="@{/admin/dataTables/jquery.dataTables.min.css}">
    <style type="text/css">
        .layui-input-inline{
            width: 490px!important;
        }
    </style>

</head>
<body class="layui-anim layui-anim-up">
<div class="x-nav">
		<span class="layui-breadcrumb">
			<a href="">首页</a>
			<a href="">号码认证</a>
			<a>
				<cite>认证配置</cite>
			</a>
		</span>
    <a class="layui-btn layui-btn-primary layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right"
       href="javascript:location.replace(location.href);" title="刷新">
        <i class="layui-icon" style="line-height:38px">ဂ</i>
    </a>
</div>
<div class="x-body">
    <table class="layui-table" id="config_table">
        <thead>
        <tr>
            <th>ID</th>
            <th>业务类型</th>
            <th>金额</th>
            <th>操作</th>
        </tr>
        </thead>
    </table>
</div>
</body>
<div th:include="admin/common/include :: footer"></div>
<script type="text/javascript">
    $(document).ready(function () {
        showTelCerConfigTable();
    });
    function showTelCerConfigTable(){
        var columns = [
            {"data": null},
            {"data": "name"},
            {"data": "price"}
        ];
        var columnDefs = [
            {
                targets: [3],
                render: function (data, type, row, meta) {
                    var id = row.id;
                    return "<a title='修改' onclick=\"editConfig('修改配置信息','/admin/toEditTelCerConfig/"+id+"',800,500);\" ><i class=\"layui-icon\">&#xe642;</i></a>";
                }
            }];
        page("#config_table", 10, {}, "/admin/getAllConfig", columns, columnDefs);
    }

    // 修改配置信息
    function editConfig(title, url, w, h) {
        layer.open({
            type: 2,
            area: [w + 'px', h + 'px'],
            fix: false,
            maxmin: true,
            shadeClose: true,
            shade: 0.4,
            title: title,
            content: url,
            end: function () {
                $('#config_table').DataTable().ajax.reload(null, false);
            }
        });
    }

</script>
</html>