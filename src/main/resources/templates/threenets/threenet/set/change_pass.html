<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<title>修改密码</title>
<link rel="stylesheet" type="text/css" th:href="@{/client/threenets/css/number_list.css}">
<head th:include="threenets/threenet/common/head :: linkcss"></head>
<style>
    .dataTables_wrapper .dataTables_filter input {
        height: 30px;
    }
    #mcontent .mconl{
        border-right: solid #ddd 1px;
    }
</style>
<body>
    <!-- 头部 -->
    <div th:include="threenets/threenet/common/include :: header"></div>
    <div class="layui-row" id="mcontent">
        <div class="layui-col-xs1 mconl">
            <div class="grid-demo grid-demo-bg1">
                <div id="page-aside" class="aside">
                    <ul class="nav">
                        <li class="management">
                            <a class="banner" href="javascript:;">个人信息</a>
                        </li>
                        <li id="apersonnel">
                            <a th:href="@{/threenets/toPersonalInformation}">个人设置</a>
                        </li>
                        <li id="ring"  class="selected">
                            <a th:href="@{/threenets/toUpdatePasswor}">修改密码</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="layui-col-xs11 mconr">
            <div class="grid-demo">
                <div class="layui-row contant" style="width:95%;">
                    <form class="layui-form" action="" method="" style="margin-top:20px;">
                        <div class="layui-form-item">
                            <label class="layui-form-label"><i style="color: red">*</i>&nbsp;原密码</label>
                            <div class="layui-input-inline">
                                <input type="password" name="oldword" id="oldword" required lay-verify="required" placeholder="请输入原密码" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label"><i style="color: red">*</i>&nbsp;新密码</label>
                            <div class="layui-input-inline">
                                <input type="password" name="newword" id="newword" required lay-verify="required" placeholder="请输入新密码" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label"><i style="color: red">*</i>&nbsp;确认密码</label>
                            <div class="layui-input-inline">
                                <input type="password" name="confirmpass" id="confirmpass" required lay-verify="required" placeholder="请确认密码" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-input-block">
                                <button class="layui-btn" lay-submit lay-filter="formDemo" style="background-color: #17a9ff!important;">立即提交</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
<div th:include="threenets/threenet/common/head :: footer"></div>
<script>
    $(".index10").addClass("active");
    //表单提交
    layui.use('form', function(){
        var form = layui.form;
        //监听提交
        form.on('submit(formDemo)', function(data){
            var oldpass = $("#oldword").val();//原密码
            var newpass = $("#newword").val();//新密码
            var confirmpass = $("#confirmpass").val();
            if(newpass != confirmpass) {
                layer.msg('新密码和确认密码不一致',{icon: 5,time:1000});
                return false;
            }
            AjaxPut("/threenets/updatePasswor",{
                oldPassword:oldpass,
                newPassword:newpass
            },function (res) {
                if (res.code == 200 && res.data){
                    layer.msg("修改成功,下次请使用新密码登录",{icon: 1,time:2500});
                    $("#oldword").val('');
                    $("#newword").val('');
                    $("#confirmpass").val('');
                }else{
                    layer.msg(res.msg,{icon: 1,time:1000});
                }
            })
            return false;
        });
    });
</script>
</html>
